@model List<Product>

@{
	Layout = "_layout";
	ViewData["Title"] = "Products";
}

<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>CRM Application</title>

	<link rel="stylesheet" type="text/css" href="/css/utils.css">
	<link rel="stylesheet" type="text/css" href="/css/style-table.css">

</head>
<body>
	<h3 style="text-align:center">Products</h3>
	@if (Model.Count > 0)
	{
		<div style="display:flex;justify-content:center">
			<table>
				<thead>
					<tr>
						<th class="main-element">Product</th>
						<th class="centered">Price</th>
						<th class="centered">Type</th>
						<th class="centered">Company</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					@foreach (Product product in Model)
					{
						<tr>
							<td class="centered"><a href="/Product/Product/@product.Id">@product.Name</a></td>
							<td class="centered">@product.Price</td>
							<td class="centered">@product.ProductType!.Name</td>
							<td class="centered"><a href="/Company/Products/@product.Seller!.CompanyId">@product.Seller!.Company!.Name</a></td>
							@using (Html.BeginForm("CreateOrder", "Order", FormMethod.Post))
							{
								<td>
									<input type="hidden" name="product.Id" value="@product.Id"/>
									<input type="hidden" name="product.Price" value="@product.Price" />
									<button type="submit" class="btn_primary mt-3 mb-3" >
										Buy
									</button>
								</td>
							}
						</tr>
					}
				</tbody>
			</table>

		</div>
		<br />
		@if (ViewBag.IsAuthorized)
		{
			<div style="display:flex;justify-content:center">
				<a href="/Product/AddProduct" class="btn_primary">Add Product</a>
			</div>
		}
	}
	else
	{
		<h3 style="text-align:center">This company has no products available.</h3>
	}

</body>
</html>
